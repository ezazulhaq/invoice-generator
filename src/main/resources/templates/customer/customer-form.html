<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="layouts/default-head :: head"></head>

<script type="text/javascript">
    $(".date").datepicker({
        format: "dd-mm-yyyy",
    });
</script>

<body class="d-flex flex-column min-vh-100">
    <nav th:replace="layouts/menu :: menu"></nav>

    <div class="container">
        <br>
        <form th:action="@{/customer/saveCustomer}" th:object="${customer}" method="POST">
            <!-- <input type="hidden" th:value="${defect.id}" name="id" /> -->

            <div class="form-group row">
                <label for="gstNo" class="form-control-label col-sm-2">GST No</label>
                <div class="col" sec:authorize="hasRole('MANAGER')">
                    <input type="text" th:field="*{gstNo}" id="gstNo" class="form-control" />
                </div>
                <div class="col" sec:authorize="hasRole('LIMITED')">
                    <input type="text" th:field="*{gstNo}" id="gstNo" class="form-control" readonly />
                </div>
            </div>
            <div class="col alert alert-warning" th:if="${#fields.hasErrors('gstNo')}" th:errors="*{gstNo}"></div>
            
            <div class="form-group row">
                <label for="customerName" class="form-control-label col-sm-2">Name</label>
                <div class="col" sec:authorize="hasRole('MANAGER')">
                    <input type="text" th:field="*{customerName}" id="customerName" class="form-control" />
                </div>
                <div class="col" sec:authorize="hasRole('LIMITED')">
                    <input type="text" th:field="*{customerName}" id="customerName" class="form-control" readonly />
                </div>
            </div>
            <div class="col alert alert-warning"
                th:if="${#fields.hasErrors('customerName')}" th:errors="*{customerName}"></div> 

            <div class="form-group row">
                <label for="address" class="form-control-label col-sm-2">Address</label>
                <div class="col">
                    <textarea rows="5" cols="25" th:field="*{address}" id="address"
                        class="form-control"></textarea>
                </div>
            </div>
            <div class="col alert alert-warning"
                th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div> 

            <div class="form-group row">
                <label for="state" class="form-control-label col-sm-2">State</label>
                <div class="col" sec:authorize="hasRole('MANAGER')">
                    <select th:field="*{state}" class="form-control" >
                        <option value="">Select</option>
                        <option th:each="a : ${stateList}" th:value="${a}" th:text="${a}" />
                    </select>
                </div>
                <div class="col" sec:authorize="hasRole('LIMITED')">
                    <select th:field="*{state}" class="form-control" >
                        <option th:value="*{state}" th:text="*{state}" />
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <label for="phoneNumber" class="form-control-label col-sm-2">Phone Number</label>
                <div class="col" sec:authorize="hasRole('MANAGER')">
                    <input type="number" th:field="*{phoneNumber}" id="phoneNumber" class="form-control" />
                </div>
                <div class="col" sec:authorize="hasRole('LIMITED')">
                    <input type="number" th:field="*{phoneNumber}" id="phoneNumber" class="form-control" readonly />
                </div>
            </div>
            <div class="col alert alert-warning"
                th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}"></div>

            <div class="form-group row">
                <label for="pinCode" class="form-control-label col-sm-2">Pin Code</label>
                <div class="col" sec:authorize="hasRole('MANAGER')">
                    <input type="number" th:field="*{pinCode}" id="pinCode" class="form-control" />
                </div>
                <div class="col" sec:authorize="hasRole('LIMITED')">
                    <input type="number" th:field="*{pinCode}" id="pinCode" class="form-control" readonly />
                </div>
            </div>
            <div class="col alert alert-warning"
                th:if="${#fields.hasErrors('pinCode')}" th:errors="*{pinCode}"></div>

            <div class="my-3">
                <input type="submit" value="Save" class="btn btn-success" />
            </div>
        </form>

    </div>

    <footer th:replace="layouts/footer :: footer"></footer>
    <div th:replace="layouts/default-script :: script"></div>
    
</body>

</html>